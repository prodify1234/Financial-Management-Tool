<app-breadcrumps></app-breadcrumps>
<div class="container">
  <h2>Transaction Analysis</h2>
  <p>Showing analysis for statement ID: {{statementId}}</p>

  <div class="filters">
    <mat-form-field appearance="outline">
      <mat-label>Classification</mat-label>
      <mat-select [(ngModel)]="selectedClassification">
        <mat-option value="all">All</mat-option>
        <mat-option value="income">Income</mat-option>
        <mat-option value="expenditure">Expenditure</mat-option>
        <mat-option value="cash">Cash Withdrawal</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="slider-container">
      <label>Min Confidence</label>
      <input type="range" min="0" max="100" step="1" [(ngModel)]="minConfidence">
      <span>{{ minConfidence / 100 | number: '1.2-2' }}</span>
    </div>

    <button mat-raised-button color="primary">Apply</button>
  </div>

  <div>
   @if(loader()){
      <app-table-shimmer [rows]="10" [columns]="5"></app-table-shimmer>
    }@else{
      <table mat-table [dataSource]="transactionSource" class="mat-elevation-z2">
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Transaction Date</th>
          <td mat-cell *matCellDef="let element">{{ element.date }}</td>
        </ng-container>

        <ng-container matColumnDef="account_Provider">
          <th mat-header-cell *matHeaderCellDef>Provider</th>
          <td mat-cell *matCellDef="let element">{{ element.account_Provider }}</td>
        </ng-container>

        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>Amount</th>
          <td mat-cell *matCellDef="let element">{{ element.amount | currency }}</td>
        </ng-container>

        <ng-container matColumnDef="classification">
          <th mat-header-cell *matHeaderCellDef>Classification</th>
          <td mat-cell *matCellDef="let element">{{ element.classification }}</td>
        </ng-container>

        <ng-container matColumnDef="sub_Classification">
          <th mat-header-cell *matHeaderCellDef>Sub-classification</th>
          <td mat-cell *matCellDef="let element">{{ element.sub_Classification }}</td>
        </ng-container>

        <ng-container matColumnDef="confidence_Score">
          <th mat-header-cell *matHeaderCellDef>Confidence</th>
          <td mat-cell *matCellDef="let element">
            <mat-progress-bar mode="determinate" [value]="element.confidence_Score"></mat-progress-bar>
            {{ element.confidence_Score }}%
          </td>
        </ng-container>

        <ng-container matColumnDef="credit">
          <th mat-header-cell *matHeaderCellDef>Credit</th>
          <td mat-cell *matCellDef="let element">{{ element.credit }}</td>
        </ng-container>

        <ng-container matColumnDef="debit">
          <th mat-header-cell *matHeaderCellDef>Debit</th>
          <td mat-cell *matCellDef="let element">{{ element.debit }}</td>
        </ng-container>

        <ng-container matColumnDef="manually_Overridden">
          <th mat-header-cell *matHeaderCellDef>Manually Overridden</th>
          <td mat-cell *matCellDef="let element">
            <span class="chip">{{element.manually_Overridden ? 'YES' : 'NO'}}</span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="transactionColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: transactionColumns;"></tr>
      </table>
    }

    <mat-paginator
        [length]="totalTransactions()"
        [pageSize]="rowsOnPage()"
        [pageIndex]="currentPage()"
        [pageSizeOptions]="[5, 10, 25, 100]"
        (page)="onPage($event)"
        aria-label="Select page"
      >
      </mat-paginator>
  </div>
</div>
